import os
import shutil

def extract_c_and_cpp_files(input_dir, output_dir):
    if not os.path.exists(input_dir):
        print("Input directory does not exist.")
        return

    if not os.path.exists(output_dir):
        os.makedirs(output_dir)

    for root, _, files in os.walk(input_dir):
        for file in files:
            if file.endswith(".c") or file.endswith(".cpp") or file.endswith(".cc"):
                file_path = os.path.join(root, file)
                base, ext = os.path.splitext(file)
                output_file = os.path.join(output_dir, f"{base}{ext}")
                count = 1


                while os.path.exists(output_file):
                    # Append a number to the base name to make it unique
                    output_file = os.path.join(output_dir, f"{base}.{count}{ext}")
                    count += 1

                shutil.copy(file_path, output_file)
                print(f"Extracted: {file_path} -> {output_file}")

if __name__ == "__main__":
    input_directory = "C:/Users/ASUS/PycharmProjects/pythonProject4/Code3/New/ieee/C"
    output_directory = "C:/Users/ASUS/PycharmProjects/pythonProject4/Code3/New/ieee/C_Files"

    extract_c_and_cpp_files(input_directory, output_directory)
